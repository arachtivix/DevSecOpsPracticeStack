infrastructure:
  templates:
    - file: "infrastructure/cloudformation.yaml"
      rendering_engine: jinja
      template_language: cloudformation

schema:
  format:
    openapi: "3.0.0"
  service_input_type: "ServiceInput"
  types:
    ServiceInput:
      type: object
      description: "Input properties for the service"
      properties:
        container_port:
          type: number
          description: "Port the container will listen on"
          default: 8080
          minimum: 0
          maximum: 65535
        container_cpu:
          type: number
          description: "CPU units for the container (1024 = 1 vCPU)"
          default: 256
          enum: [256, 512, 1024, 2048]
        container_memory:
          type: number
          description: "Memory in MB for the container"
          default: 512
          enum: [512, 1024, 2048, 4096]
        desired_count:
          type: number
          description: "Desired number of instances"
          default: 2
          minimum: 1
          maximum: 10
      required:
        - container_port
        - container_cpu
        - container_memory
        - desired_count